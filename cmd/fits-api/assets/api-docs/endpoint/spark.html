{{define "base"}}
<div class="container-fluid">

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/api-docs">Index</a></li>
            <li class="breadcrumb-item">Endpoint</li>
            <li class="breadcrumb-item active" aria-current="page">Spark Lines</li>
        </ol>
    </nav>

    <h2 class="mt-5">Spark Lines</h2>
    <hr class="text-secondary"/>

    <p class="lead">Simple spark lines of recent observations.</p>
    <h4>Query Index:</h4>

    <ul>
        <li><a href="#sparklinessvg">Sparklines SVG</a> - Sparklines of observations as Scalable Vector Graphic (SVG)
        </li>
    </ul>


    <a id="sparklinessvg" class="anchor"></a>
    <h3 class="page-header">Sparklines SVG</h3>
    <hr class="text-secondary"/>

    <p class="lead">Sparklines of observations as Scalable Vector Graphic (SVG)</p>
    <p><a href="http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001OR">Sparklines</a> of observations.</p>
    <p><b><i>Caution:</i></b> these spark line plots should be used with caution
        and some understanding of the underlying data. FITS data is often unevenly sampled. The data range may not be
        accurately represented at the resolution of these plots. No down sampling of any kind is attempted for plotting.
        There is
        potential for signal to be obscured or visual artifacts created. If you think you have seen
        something interesting then please use the raw CSV observations and more sophisticated analysis techniques to
        confirm your observations.</p>
    <p>
        <img src="/spark?siteID=GISB&typeID=e&days=365" style="width: 100% \9" class="img-responsive"/>
        <br/>Spark lines can be used in an html img tag e.g., <code>&lt;img
            src="http://fits.geonet.org.nz/spark?siteID=GISB&typeID=e&days=365"/></code> or as
        an object or inline depending on your needs.
    </p>

    <p>
        The labels on the sparkline (and so the width of the image) can be controlled using the <code>label</code>
        parameter.</p>
    <table>
        <tr>
            <td></td>
            <td><code>label</code></td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=none" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>none</td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>latest</td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=all" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>all (default)</td>
        </tr>
    </table>
    </p>

    <p>
        The type of plot can be controlled using the <code>type</code> parameter.</p>
    <table>
        <tr>
            <td></td>
            <td><code>type</code></td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest&type=line" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>line (default)</td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest&type=scatter" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>scatter</td>
        </tr>
    </table>
    </p>

    <p>
        The range of x axis of plot can be controlled using the <code>days</code> parameter to set the data to include
        the number of days before now.</p>
    <table>
        <tr>
            <td></td>
            <td><code>days</code></td>
            <td></td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest&type=line" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>100</td>
            <td></td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=365&label=latest&type=line" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>365</td>
            <td></td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=3650&label=latest&type=line" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>3650</td>
            <td>Data is not aggregated. Consider the plot resolution.</td>
        </tr>
    </table>
    </p>

    <p>
        The range of the y axis of plot can be controlled using the <code>yrange</code> parameter.</p>
    <table>
        <tr>
            <td></td>
            <td><code>yrange</code></td>
            <td></td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest&type=line" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td></td>
            <td>Not set - auto range on the data.</td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest&type=line&yrange=50" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>50</td>
            <td>Single value - fixed range centered on the data</td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest&type=line&yrange=-15,50"
                     style="width: 100% \9" class="img-responsive"/></td>
            <td>-15,50</td>
            <td>Pair of values - fixes the y axis range</td>
        </tr>
        <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest&type=line&yrange=-5,5" style="width: 100% \9"
                 class="img-responsive"/></td>
        <td>-5,5</td>
        <td>For a set y axis data out of range changes the background.</td>
        </tr>
    </table>
    </p>

    <p>
        The standard deviation and mean can be shown on a plot using the <code>stddev</code> parameter.</p>
    <table>
        <tr>
            <td></td>
            <td><code>stddev</code></td>
            <td></td>
        </tr>
        <tr>
            <td><img src="/spark?siteID=GISB&typeID=e&days=100&label=latest&type=line&stddev=pop" style="width: 100% \9"
                     class="img-responsive"/></td>
            <td>pop</td>
            <td></td>
        </tr>
    </table>
    </p>

    <div class="card p-0">
        <div class="card-header">Method: GET</div>
        <div class="card-body">
            <dl class="row">
                <dt class="col-md-2 text-end">URI</dt>
                <dd class="col-md-10">/spark?typeID=(typeID)&amp;siteID=(siteID)&amp;[yrange=float64]&amp;[type=(line|scatter)]</dd>
                <dt class="col-md-2 text-end">Accept</dt>
                <dd></dd>
            </dl>
        </div>
    </div>
    <h4>Query Parameters</h4>

    <h5>Required:</h5>
    <dl class="row">
        <dt class="col-md-2 text-end">siteID</dt>
        <dd class="col-md-10">Site identifier e.g., <code>WI000</code>.</dd>

        <dt class="col-md-2 text-end">typeID</dt>
        <dd class="col-md-10">A type identifier for observations e.g., <code>e</code>.</dd>
    </dl>


    <h5>Optional:</h5>
    <dl class="row">

        <dt class="col-md-2 text-end">days</dt>
        <dd class="col-md-10">The number of days of data to display before now e.g., <code>250</code>. Sets the range of the
            x-axis which may not be the same as the data. Maximum value is 365000.
        </dd>

        <dt class="col-md-2 text-end">label</dt>
        <dd class="col-md-10"><code>all</code> (default) <code>none</code> <code>latest</code></dd>

        <dt class="col-md-2 text-end">stddev</dt>
        <dd class="col-md-10">Show standard deviation for the time window selected for the plot. Allowable value is <code>pop</code> for
            population standard deviation.
        </dd>

        <dt class="col-md-2 text-end">type</dt>
        <dd class="col-md-10">Plot type. Default <code>line</code>. Either <code>line</code> or <code>scatter</code>.</dd>

        <dt class="col-md-2 text-end">yrange</dt>
        <dd class="col-md-10">Defines the y-axis range as a fixed or dynamic range. A comma separated pair of values fix the min and max
            e.g., <code>-15,50</code>.
            A single value sets the positive and negative range about the mid point of the minimum and maximum
            data values. For example if the minimum and maximum y values in the data selection are 10 and 30 and the
            yrange is <code>40</code> then
            the y-axis range will be -20 to 60. yrange must be > 0 for single value dynamic range. If there are data in
            the time range that would be out of range on the plot then the background
            colour of the plot is changed.
        </dd>

    </dl>

    <h4>Response Properties</h4>
    <dl class="row">

        <dt class="col-md-2 text-end">SVG</dt>
        <dd class="col-md-10">This query returns an <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a> image.</dd>
    </dl>
</div>
{{end}}

