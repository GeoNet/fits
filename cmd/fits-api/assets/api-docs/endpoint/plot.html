{{define "base"}}
<div class="container-fluid">

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/api-docs">Index</a></li>
            <li class="breadcrumb-item">Endpoint</li>
            <li class="breadcrumb-item active" aria-current="page">Plot</li>
        </ol>
    </nav>

    <h2 class="mt-5">Plot</h2>
    <hr class="text-secondary"/>

    <p class="lead">Simple plots of observations.</p>
    <h4>Query Index:</h4>

    <ul>
        <li><a href="#singlesite">Single Site</a> - Plot observations for a single site as Scalable Vector Graphic (SVG)
        </li>
    </ul>

    <ul>
        <li><a href="#multiplesites">Multiple Sites</a> - Plot observations for multiple sites as Scalable Vector
            Graphic (SVG)
        </li>
    </ul>


    <a id="singlesite" class="anchor"></a>
    <h3 class="page-header">Single Site</h3>
    <hr class="text-secondary"/>

    <p class="lead">Plot observations for a single site as Scalable Vector Graphic (SVG)</p>
    <p><b><i>Caution:</i></b> these plots should be used with caution
        and some understanding of the underlying data. FITS data is often unevenly sampled. The requested data range may
        not be
        accurately represented at the resolution of these plots. No down sampling of any kind is attempted for plotting.
        There is
        potential for signal to be obscured or visual artifacts created. If you think you have seen
        something interesting then please use the raw CSV observations and more sophisticated analysis techniques to
        confirm your observations.</p>
    <p>
        <img src="/plot?siteID=GISB&typeID=e" style="width: 100% \9" class="img-responsive"/>
        <br/>Plots show data with errors. The minimum, maximum, and latest values are labeled. The plot can be
        used in an html img tag e.g., <code>&lt;img src="http://fits.geonet.org.nz/plot?siteID=GISB&typeID=e"/></code>
        or as
        an object or inline depending on your needs.
    </p>
    <p>
        <img src="/plot?siteID=GISB&typeID=e&days=300" style="width: 100% \9" class="img-responsive"/>
        <br/>The number of days displayed can be changed with the <code>days</code> query parameter. If
        <code>start</code> is not specifed then
        the number of days before now is displayed.
        <code>&lt;img src="http://fits.geonet.org.nz/plot?siteID=GISB&typeID=e&days=300"/></code>
    </p>
    <p>
        <img src="/plot?siteID=GISB&typeID=e&start=2010-01-01T00:00:00Z&days=200" style="width: 100% \9"
             class="img-responsive"/>
        <br/>A fixed time range for the plot can be specified by setting <code>start</code> and <code>days</code>.
        <code>&lt;img
            src="http://fits.geonet.org.nz/plot?siteID=GISB&typeID=e&start=2010-01-01T00:00:00Z&days=200"/></code>
    </p>
    <p>
        <img src="/plot?siteID=GISB&typeID=e&days=300&yrange=50" style="width: 100% \9" class="img-responsive"/>
        <br/>The range of the y-axis can be set with the <code>yrange</code> query parameter. A single value sets a
        fixed range centered on the data.
        <code>&lt;img src="http://fits.geonet.org.nz/plot?siteID=GISB&typeID=e&days=300&yrange=50"/></code>
    </p>
    <p>
        <img src="/plot?siteID=GISB&typeID=e&days=300&yrange=-15,50" style="width: 100% \9" class="img-responsive"/>
        <br/>The range of the y-axis can be set with the <code>yrange</code> query parameter. A pair of values fixes the
        y axis range.
        <code>&lt;img src="http://fits.geonet.org.nz/plot?siteID=GISB&typeID=e&days=300&yrange=-15,50"/></code>
    </p>
    <p>
        <img src="/plot?siteID=GISB&typeID=e_rf&yrange=50" style="width: 100% \9" class="img-responsive"/>
        <br/>Not all observations have an associated error estimate.
        <code>&lt;img src="http://fits.geonet.org.nz/plot?siteID=GISB&typeID=e_rf&days=300"/></code>
    </p>
    <p>
        <img src="/plot?siteID=WI000&typeID=SO2-flux-a&type=scatter&stddev=pop" style="width: 100% \9"
             class="img-responsive"/>
        <br/>Scatter plots may be more appropriate for some observations. The population standard deviation can also be
        shown on a plot.
        <code>&lt;img
            src="http://fits.geonet.org.nz/plot?siteID=WI000&typeID=SO2-flux-a&type=scatter&stddev=pop"/></code>
    </p>
    <img src="/plot?siteID=WI000&typeID=SO2-flux-a&type=scatter&showMethod=true" style="width: 100% \9"
         class="img-responsive"/>
    <br/>The method used for an observation type can also be indicated on a scatter plot.
    <code>&lt;img
        src="http://fits.geonet.org.nz/plot?siteID=WI000&typeID=SO2-flux-a&type=scatter&showMethod=true"/></code>
    </p>
    <p>
        <img src="/plot?siteID=WI000&typeID=SO2-flux-a&type=scatter&showMethod=true&scheme=projector"
             style="width: 100% \9" class="img-responsive"/>
        <br/>The <code>scheme=projector</code> parameter makes scatter/line plots with higher saturate colours so
        they'll be clearer for projectors.
        <code>&lt;img
            src="http://fits.geonet.org.nz/plot?siteID=WI000&typeID=SO2-flux-a&type=scatter&showMethod=true&scheme=projector"/></code>
    </p>
    <img src="/plot?siteID=WI000&typeID=SO2-flux-a&type=scatter&yrange=400" style="width: 100% \9"
         class="img-responsive"/>
    <br/>If <code>yrange</code> is set and data values would be out of range the background colour of the plot changes.
    This happens
    with <code>line</code> and <code>scatter</code> plots.
    <code>&lt;img src="http://fits.geonet.org.nz/plot?siteID=WI000&typeID=SO2-flux-a&type=scatter&yrange=400"/></code>
    </p>

    <div class="card p-0">
        <div class="card-header">Method: GET</div>
        <div class="card-body">
            <dl class="row">
                <dt class="col-md-2 test-end">URI</dt>
                <dd class="col-md-10">/plot?typeID=(typeID)&amp;siteID=(siteID)&amp;[days=int]&amp;[yrange=float64]&amp;[type=(line|scatter)&amp;[showMethod=true]&amp;[stddev=pop]&amp;[scheme=web]]</dd>
                <dt class="col-md-2 test-end">Accept</dt>
                <dd></dd>
            </dl>
        </div>
    </div>
    <h4>Query Parameters</h4>

    <h5>Required:</h5>
    <dl class="row">

        <dt class="col-md-2 test-end">siteID</dt>
        <dd class="col-md-10">Site identifier e.g., <code>WI000</code>.</dd>

        <dt class="col-md-2 test-end">typeID</dt>
        <dd class="col-md-10">A type identifier for observations e.g., <code>e</code>.</dd>

    </dl>


    <h5>Optional:</h5>
    <dl class="row">

        <dt class="col-md-2 test-end">days</dt>
        <dd class="col-md-10">The number of days of data to display e.g., <code>250</code>. If <code>start</code> is not specified then
            the number of days
            before now is displayed. If <code>start</code> is specified then the number of days after <code>start</code>
            is displayed. Maximum value is 365000.
        </dd>

        <dt class="col-md-2 test-end">showMethod</dt>
        <dd class="col-md-10">If the plot type is <code>scatter</code> setting showMethod <code>true</code> will colour the data
            markers based on methodID.
        </dd>

        <dt class="col-md-2 test-end">start</dt>
        <dd class="col-md-10">the date time in ISO8601 format for the start of the time window for the request e.g., <code>2014-01-08T12:00:00Z</code>.
        </dd>

        <dt class="col-md-2 test-end">stddev</dt>
        <dd class="col-md-10">Show standard deviation for the time window selected for the plot. Allowable value is <code>pop</code> for
            population standard deviation.
        </dd>

        <dt class="col-md-2 test-end">type</dt>
        <dd class="col-md-10">Plot type. Default <code>line</code>. Either <code>line</code> or <code>scatter</code>.</dd>

        <dt class="col-md-2 test-end">yrange</dt>
        <dd class="col-md-10">Defines the y-axis range as a fixed or dynamic range. A comma separated pair of values fix the min and max
            e.g., <code>-15,50</code>.
            A single value sets the positive and negative range about the mid point of the minimum and maximum
            data values. For example if the minimum and maximum y values in the data selection are 10 and 30 and the
            yrange is <code>40</code> then
            the y-axis range will be -20 to 60. yrange must be > 0 for single value dynamic range. If there are data in
            the time range that would be out of range on the plot then the background
            colour of the plot is changed.
        </dd>

        <dt class="col-md-2 test-end">scheme</dt>
        <dd class="col-md-10">Change colour scheme for drawing scatter plots. Currently available schemes are: <code>web</code> and <code>projector</code>.
            The default value is <code>web</code>.
        </dd>

    </dl>

    <h4>Response Properties</h4>
    <dl class="row">

        <dt class="col-md-2 test-end">SVG</dt>
        <dd class="col-md-10">This query returns an <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a> image.</dd>


        <a id="multiplesites" class="anchor"></a>

        <h3 class="mt-3">Multiple Sites</h3>
        <hr class="text-secondary"/>

        <p class="lead">Plot observations for multiple sites as Scalable Vector Graphic (SVG)</p>
        <p>Plots are similar to those for a single site. Multiple sites can be specified using the <code>sites</code>
            query parameter e.g.,
            <img src="/plot?sites=LI.GISB,CG.CNST&typeID=e&days=400&type=scatter" style="width: 100% \9"
                 class="img-responsive"/><br/>
            <code>&lt;img
                src="http://fits.geonet.org.nz/plot?sites=LI.GISB,CG.CNST&typeID=e&days=400&type=scatter"/></code><br/>
        </p>
        <div class="card p-0">
            <div class="card-header">Method: GET</div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-md-2 test-end">URI</dt>
                    <dd class="col-md-10">/plot?typeID=(typeID)&amp;siteID=(siteID)&amp;[days=int]&amp;[yrange=float64]&amp;[type=(line|scatter)&amp;[showMethod=true]&amp;[stddev=pop]&amp;[scheme=web]]</dd>
                    <dt class="col-md-2 test-end">Accept</dt>
                    <dd></dd>
                </dl>
            </div>
        </div>

        <h4 class="mt-2">Query Parameters</h4>

        <h5>Required:</h5>
        <dl class="row">

            <dt class="col-md-2 test-end">sites</dt>
            <dd class="col-md-10">A comma separated list of sites specified by <code>siteID</code> e.g., <code>GISB,TAUP</code>.</dd>

            <dt class="col-md-2 test-end">typeID</dt>
            <dd class="col-md-10">A type identifier for observations e.g., <code>e</code>.</dd>

        </dl>


        <h5>Optional:</h5>
        <dl class="row">

            <dt class="col-md-2 test-end">days</dt>
            <dd class="col-md-10">The number of days of data to display e.g., <code>250</code>. If <code>start</code> is not specified
                then the number of days
                before now is displayed. If <code>start</code> is specified then the number of days after
                <code>start</code> is displayed. Maximum value is 365000.
            </dd>

            <dt class="col-md-2 test-end">start</dt>
            <dd class="col-md-10">the date time in ISO8601 format for the start of the time window for the request e.g., <code>2014-01-08T12:00:00Z</code>.
            </dd>

            <dt class="col-md-2 test-end">type</dt>
            <dd class="col-md-10">Plot type. Default <code>line</code>. Either <code>line</code> or <code>scatter</code>.</dd>

            <dt class="col-md-2 test-end">yrange</dt>
            <dd class="col-md-10">Defines the y-axis range as a fixed or dynamic range. A comma separated pair of values fix the min and
                max e.g., <code>-15,50</code>.
                A single value sets the positive and negative range about the mid point of the minimum and maximum
                data values. For example if the minimum and maximum y values in the data selection are 10 and 30 and the
                yrange is <code>40</code> then
                the y-axis range will be -20 to 60. yrange must be > 0 for single value dynamic range. If there are data
                in the time range that would be out of range on the plot then the background
                colour of the plot is changed.
            </dd>

            <dt class="col-md-2 test-end">scheme</dt>
            <dd class="col-md-10">Change colour scheme for drawing scatter plots. Currently available schemes are: <code>web</code> and
                <code>projector</code>. The default value is <code>web</code>.
            </dd>

        </dl>

        <h4>Response Properties</h4>
        <dl class="row">

            <dt class="col-md-2 test-end">SVG</dt>
            <dd class="col-md-10">This query returns an <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a> image.
            </dd>


        </dl>
</div>
{{end}}

